import{aK as M,o as i,i as v,q as l,j as a,a8 as b,aL as B,c as e,at as o,t as c,b1 as q,a as T,d as _,F as L,f as w,ad as C,w as g,aa as Q,ag as I}from"./index.73de013b.js";import{u as A,a as D,_ as y}from"./PostIcon.3dd0017d.js";import{b as H}from"./post.055bc757.js";function N(t=new Date("2025-03-24 17:32")){const s=new Intl.RelativeTimeFormat("ko",{numeric:"auto"}),h=new Date,n=Math.abs(t-h),k=Math.floor(n/1e3),r=Math.floor(k/60),m=Math.floor(r/60),d=Math.floor(m/24),u=Math.floor(d/365);return u>0?s.format(-1*u,"year"):d>0?s.format(-1*d,"day"):m>0?s.format(-1*m,"hour"):r>0?s.format(-1*r,"minute"):s.format(-1*k,"second")}const F=["src"],R={class:"flex items-center"},S={class:"text-h6 q-mt-sm"},U={class:"text-primary text-caption"},V={key:0,class:"text-grey-6 q-my-sm ellipsis-2-lines"},$=["innerHTML"],j={class:"row items-center"},P={class:"col-3"},E={class:"flex flex-center"},K={class:"col-3"},O={class:"flex flex-center"},z={class:"col-3"},G={class:"flex flex-center"},J={class:"col-3"},W={class:"flex flex-center"},X={__name:"PostItem",props:{item:{type:Object,default:()=>({})},escapeHTML:{type:Boolean,default:!1}},setup(t){const s=t,{isLike:h,likeCount:n,toggleLike:k}=A(s.item.id,{initialCount:s.item.likeCount}),{isBookmark:r,bookmarkCount:m,toggleBookmark:d}=D(s.item.id,{initialCount:s.item.bookmarkCount}),{state:u}=M(()=>H(s.item.uid),{});return(Y,x)=>(i(),v(Q,{class:"bg-white q-pt-md",clickable:"",to:`/posts/${t.item.id}`},{default:l(()=>[a(b,{avatar:"",top:""},{default:l(()=>[a(B,null,{default:l(()=>{var f;return[e("img",{src:(f=o(u))==null?void 0:f.photoURL,alt:""},null,8,F)]}),_:1})]),_:1}),a(b,null,{default:l(()=>{var f;return[e("div",R,[e("span",null,c((f=o(u))==null?void 0:f.displayName),1),x[0]||(x[0]=e("span",{class:"q-mx-xs"},"\xB7",-1)),e("span",null,c(o(N)(t.item.createdAt)),1),a(q,{class:"q-ml-sm",dense:"",color:"primary","text-color":"white"},{default:l(()=>[T(c(t.item.category),1)]),_:1})]),e("div",S,c(t.item.title),1),e("div",U,[(i(!0),_(L,null,w(t.item.tags,p=>(i(),_("span",{key:p,class:"q-mr-sm"},"#"+c(p),1))),128))]),t.escapeHTML?(i(),_("div",V,c(t.item.content),1)):(i(),_("div",{key:1,class:"text-grey-6 q-my-sm ellipsis-2-lines",innerHTML:t.item.content},null,8,$)),e("div",j,[e("div",P,[e("div",E,[a(y,{name:"sym_o_visibility",label:t.item.readCount,tooltip:"\uC870\uD68C\uC218"},null,8,["label"])])]),e("div",K,[e("div",O,[a(y,{name:"sym_o_sms",label:t.item.commentCount,tooltip:"\uB313\uAE00\uC218"},null,8,["label"])])]),e("div",z,[e("div",G,[a(C,{class:"full-width",flat:"",dense:"",onClick:g(o(k),["prevent"])},{default:l(()=>[a(y,{name:o(h)?"favorite":"sym_o_favorite",label:o(n),tooltip:"\uC88B\uC544\uC694"},null,8,["name","label"])]),_:1},8,["onClick"])])]),e("div",J,[e("div",W,[a(C,{class:"full-width",flat:"",dense:"",onClick:g(o(d),["prevent"])},{default:l(()=>[a(y,{name:o(r)?"bookmark":"sym_o_bookmark",label:o(m),tooltip:"\uBD81\uB9C8\uD06C"},null,8,["name","label"])]),_:1},8,["onClick"])])])])]}),_:1})]),_:1},8,["to"]))}},se={__name:"PostList",props:{items:Array,default:()=>[]},setup(t){return(s,h)=>(i(),v(I,{bordered:"",separator:""},{default:l(()=>[(i(!0),_(L,null,w(t.items,n=>(i(),v(X,{key:n.id,item:n},null,8,["item"]))),128))]),_:1}))}};export{se as _};
